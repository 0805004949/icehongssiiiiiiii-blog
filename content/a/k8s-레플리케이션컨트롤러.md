---
title: k8s-ë ˆí”Œë¦¬ì¼€ì´ì…˜ì»¨íŠ¸ë¡¤ëŸ¬
date: 2023-05-10T16:26:07
tags: ["2023-k8s-bootcamp","k8s","KR","ì¸ê°•-devopsë¥¼ìœ„í•œ-k8s","blog-published"] 

categories: ["TIL"] # <!--"progress-diary", "posts"  , "TIL"í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œë³´ì…ˆ -->
slug: "" # <!--ì˜ì–´ slugë§Œ ê°€ëŠ¥ urlì—ì„œ ë³´ì¼ ìˆ˜ ìˆìŒ-->
aliases: "" # <!--ë­”ì§€ëª°ë¼-->
keywords: [""] # <!--ë­”ì§€ëª°ë¼-->
series: "" # <!--ë­”ì§€ëª°ë¼-->
description: "" # <!--í¬ìŠ¤íŠ¸ì—ëŒ€í•œì„¤ëª… -->
lastmod: 2023-05-11T01:43:05
---



## replication controllerfë€?

- replicasetì˜ êµ¬ë²„ì „(k8s 1.8ë²„ì „ì—ì„œ ì‚¬ìš©)
- repplicasetê³¼ ë™ì‘ë°©ì‹ì´ ê±°ì˜ ë™ì¼í•¨
- PODê°€ í•­ìƒ ì‹¤í–‰ë˜ë„ë¡ ìœ ì§€í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë¦¬ì†ŒìŠ¤
- ì›Œì»¤ë…¸ë“œ1ì˜ ì¥ì• ë¥¼ 5ë¶„í›„ì—(default ê°’) replicasetì´ ì¸ì§€í•˜ê³  ë‹¤ë¥¸ ë…¸ë“œì— ìƒˆ POD ìƒì„±. ê³§ë°”ë¡œ ë§Œë“¤ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ê°€ë” íŠ¸ë˜í”½ì´ ëª°ë¦´ ë•Œ ë„¤íŠ¸ì›Œí¬ê°€ ëŠê¸°ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸
- ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ë¼ì§€ëŠ” ê²½ìš° PODë¥¼ ê°ì§€í•˜ê³  ëŒ€ì²´ POD ìƒì„±
- ì‹¤í–‰ ì¤‘ íŒŒë“œ ëª©ë¡ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  `ìœ í˜•` ì˜ ì‹¤ì œ PODìˆ˜ê°€ ì›í•˜ëŠ” ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
![](https://i.imgur.com/H4Rii0N.png)

## replication controller íŠ¹ì§•

- podê°€ ì—†ëŠ” ê²½ìš° ìƒˆ pod í•­ìƒ ì‹¤í–‰
- ë…¸ë“œì— ì¥ì•  ë°œìƒì‹œ ë‹¤ë¥¸ ë…¸ë“œì— ë³µì œë³¸ ìƒì„±
- ìë™ìœ¼ë¡œ ìˆ˜í‰ ìŠ¤ì¼€ì¼ ì•„ì›ƒ
- ìš”ì†Œ
	- ë ˆì´ë¸” ì…€ë ‰í„° : replication controllerê°€ ê´€ë¦¬í•˜ëŠ” pod ë²”ìœ„ ê²°ì •
	- ë³µì œë³¸ ìˆ˜ : ì‹¤í–‰í•´ì•¼í•˜ëŠ” Pod ìˆ˜ ê²°ì •
	- pod template : ìƒˆë¡œìš´ íŒŒë“œ ëª¨ì–‘ ì„¤ëª…

```yaml
# http-go-rc.yaml
apiVersion: v1
kind: ReplicationController
metadata:
  name: http-go
spec:
  replicas: 3
  selector:
    app: http-go ######  labelê³¼ ë™ì¼í•´ì•¼í•¨
  template:
    metadata:
      name: http-go
      labels:
        app: http-go ### selecto ë ˆì´ë¸”ê³¼ ë™ì¼í•´ì•¼í•¨
    spec:
      containers:
      - name: http-go
        image: gasbugs/http-go
        ports:
        - containerPort: 80
```

PODë¥¼ ì‚­ì œì‹œí‚¤ë©´ replication controllerê°€ ìƒˆ  POD ìƒì„±
- ë ˆì´ë¸”ì„ ê°•ì œë¡œ ë³€ê²½í•˜ëŠ”ê²½ìš°?
ë ˆë¸”ë¦¬ì¹´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” labelë¡œ ì¡°íšŒë¥¼í•˜ê¸°ì— ì¤‘ìš”í•¨. ì´ ì¤‘ ë ˆì´ë¸” í•˜ë‚˜ê°€ ì‚­ì œë˜ë©´ ì¡°íšŒê°€ ì•ˆë˜ë¯€ë¡œ ê°•ì œë¡œ ìƒˆ POD ìƒì„±í•¨



## ë§Œì•½ì— ë…¸ë“œí•˜ë‚˜ì˜ ìƒíƒœê°€ `Not Ready`  ë¡œ ë°”ë€ë‹¤ë©´ ê·¸ ì•ˆì—ìˆë˜ PODë“¤ì€ ì–´ë–»ê²Œ ë„ë‚˜?
![](https://i.imgur.com/NSrMNBF.png)
![](https://i.imgur.com/qZTCp6p.png)
ì¢…ë£Œëœ nodeì•ˆì— ìˆë˜ podë“¤ì€ ì—¬ì „íˆ running ìƒíƒœì¸ë° ì´ëŠ” 5ë¶„ í›„ì— ì˜¤ë¥˜ê°€ ê°ì§€ë  ê²ƒì„

> [!note] ì™œ 5ë¶„ì„ ê¸°ë‹¤ë¦¬ì§€?
> íŠ¸ë˜í”½ì´ ë§ì•„ì§€ë©´ í†µì‹ ì´ ëŠë ¤ì§€ëŠ”ë° ê·¸ëŸ°ê²½ìš° ì»¨í…Œì´ë„ˆ ë¹ ë¥´ê²Œ ë°˜ì‘í•˜ë©´ ì»¨í…Œì´ë„ˆê°€ ë¶ˆí•„ìš”í•˜ê²Œ ìƒì„±ëë‹¤ ì‚¬ë¼ì§€ë¯€ë¡œ 5ë¶„ ìœ ì˜ˆê¸°ê°„ì„ ì¤Œ 

![](https://i.imgur.com/9cEJJTN.png)
ê·¸ë¦¬ê³  ë‹¤ì‹œ ì‚´ì•„ìˆëŠ” nodeì— podë“¤ì´ ìƒê¸°ê³  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë˜ nodeì— ìˆë˜ podë“¤ì€ ì‚­ì œë¨

> [!note] ë§Œì•½ì— ì¤‘ì§€ëœ nodeë¥¼ ë‹¤ì‹œ ì‚´ë¦¬ë©´?
> ë‹¤ì‹œ ì‚´ë ¤ë„ ê·¸ ì•ˆì—ìˆë˜ podë“¤ì´ ë‹¤ì‹œ ìƒì„±ë˜ì§€ ì•ŠìŒ




## replication controller ì‹¤ìŠµ

- ì‹¤í–‰ì¤‘ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ í¬ë“œ í™•ì¸
```
kubectl get rc, pod
```


- replication ì •ë³´ í™•ì¸

```
kubectl describe rc rc-http-go
```

- ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì‚­ì œì‹œ  (ë³´í†µì€ ê·¸ ì•„ë˜ìˆëŠ” PODë„ ì‚­ì œë¨)
```
kubectl delete rc http-go
```

- ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ˜ì •(ìŠ¤ì¼€ì¼)
```
kubectl scale rc http-go --replicas=5
```
ë˜ëŠ”

```
kubectl edit rc http-go 
# vim ìœ¼ë¡œ ì—´ë¦¬ëŠ”ë° ì—¬ê¸°ì—ì„œ replicas=5ë¡œ ì§ì ‘ ë³€ê²½ë„ë¨(specì•„ë˜ìˆëŠ”)
```

- ì„ ì–¸ì ìœ¼ë¡œ ë³€ê²½í•˜ê¸°

 ê¸°ì¡´ì— ìˆë˜ `http-go-rc` ì—ì„œ ë ˆí”Œë¦¬ì¹´ìŠ¤ë¥¼ 10ê°œë¡œ ë°”ê¾¸ê³  ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ k8sê°€ ì•Œì•„ì„œ ë°”ê¿”ì¤Œ 

```
kubectl apply -f http-go-rc.yaml
```




## ğŸ“‘ Ref
- ì¸í”„ëŸ° - devopsë¥¼ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤