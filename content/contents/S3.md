---
title: S3
date: 2023-04-25T15:44:38+09:00
lastMod: 2023-05-04T15:44:38+09:00
tags: ["2023-k8s-bootcamp","aws","kr", "blog-published"] 
categories: ["TIL"] # <!--"progress-diary", "posts"  , "TIL"í•˜ë‚˜ë§Œ ì„ íƒí•´ì„œë³´ì…ˆ -->
slug: "" # <!--ì˜ì–´ slugë§Œ ê°€ëŠ¥ urlì—ì„œ ë³´ì¼ ìˆ˜ ìˆìŒ-->
aliases: "" # <!--ë­”ì§€ëª°ë¼-->
keywords: [""] # <!--ë­”ì§€ëª°ë¼->
series: "" # <!--ë­”ì§€ëª°ë¼-->
description: "" # <!--í¬ìŠ¤íŠ¸ì—ëŒ€í•œì„¤ëª… -->
---



s3ëŠ” íŒŒì¼ ì €ì¥ì†Œì´ì§€ë§Œ, í”„ëŸ°íŠ¸ì—”ë“œë¥¼ ì •ì  ì›¹í˜¸ìŠ¤íŒ…ì„ ë°°í¬í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜  ìˆìŒ. í”„ëŸ°íŠ¸ì—”ë“œ ì¤‘ CSR (Client Sider Rendering)ë¥¼ ë°°í¬í•˜ëŠ”ë° ì‚¬ìš©ê°€ëŠ¥.



## create s3 bucket

S3 > bucket

- name : saju-front-prod
- ap-northeast-2
- ëª¨ë“  í¼ë¸”ë¦­ ì—‘ì„¸ìŠ¤ ì°¨ë‹¨ í•´ì œ -> ì›¹ í˜ì´ì§€ (í”„ëŸ°íŠ¸)ë¥¼ ë°°í¬í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ëª¨ë“  í¼ë¸”ë¦­ ì—‘ì„¸ìŠ¤ ì°¨ë‹¨ í•´ì œ í›„ ì‚¬ìš©ìê°€ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ
- tag
	- Name = saju-front-prod
	- Service = saju-prod

## ì •ì  ì›¹ í˜¸ìŠ¤íŒ… 

s3 > bucket > saju-front-prod > properties > static website hosting 

- enable static website hosting
- hosting type : static website hosting
- index doc : index.html
- error doc : index.html
- bucket website endpoint : http://saju-front-prod.s3-website.ap-northeast-2.amazonaws.com


- edit bucket policy 
s3 > permission > edit bucket policy
```json 
{  
"Version": "2012-10-17",  
"Id": "Policy1546621853468",  
"Statement": [  
{  
"Sid": "Stmt1546621828605",  
"Effect": "Allow",  
"Principal": "*",  
"Action": "s3:GetObject",  
"Resource": "arn:aws:s3:::saju-front-prod/*"  
}  
]  
}
```

## frontend ë¹Œë“œ


íŒŒì¼ ìœ„ì¹˜ : /src/api/index.js

productioní™˜ê²½ì—ì„œ  baseURLì„ ec2 í¼ë¸”ë¦­ ipë¡œ ë³€ê²½

```js
import axios from "axios";  
  
export default process.env.NODE_ENV == "production"  
Â  ? axios.create({  
Â  Â  Â  //production í™˜ê²½ (AWS EC2)  
Â  Â  Â  baseURL: "http://EC2 í¼ë¸”ë¦­ IP ì£¼ì†Œ:3000",  
Â  Â  })  
Â  : axios.create({  
Â  Â  Â  //development í™˜ê²½  
Â  Â  Â  baseURL: "http://localhost:3000",  
Â  Â  });
```


```sh 
$ cd /Users/icehongssii/ws/saju-frontend-vuejs

$ nvm use 16.13.2
$ npm install
$ npm run build
```


ì´ë•Œ ë¹Œë“œ í›„ dist. í´ë”ì— ìƒì„±ëœ íŒŒì¼ 4ê°œë¥¼ s3 objectì— ë„£ëŠ”ë‹¤

/Users/icehongssii/ws/saju-frontend-vuejs/dist


ê·¸ë¦¬ê³  s3 static website hosting endpointë¡œ ì ‘ì†í•˜ê³  í™•ì¸!


## ğŸ“‘ Ref
- ì¸í”„ëŸ° - ì§€ê¸ˆ ë‹¹ì¥ AWS!!